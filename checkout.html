<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | تأكيد الطلب - INI VOLT</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#E53935',
                        'secondary-accent': '#FFD700',
                        'dark-bg': '#0D0D0D',
                        'light-bg': '#1A1A1A',
                        'secondary-text': '#9E9E9E',
                        'price-color': '#FF0000',
                        'success-color': '#28a745',
                        'footer-bg': '#000000',
                        'glass-bg': 'rgba(26, 26, 26, 0.5)',
                        'glass-border': 'rgba(255, 255, 255, 0.1)',
                    },
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"> 
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        .checkout-container {
            max-width: 1000px;
        }
        .order-summary-list div {
             flex-direction: row-reverse;
        }
    </style>
</head>

<body class="font-sans bg-dark-bg text-white m-0 p-0">

    <nav class="client-nav flex justify-between items-center px-8 py-4 bg-footer-bg text-white shadow-xl sticky top-0 z-50 border-b-2 border-primary">
        <h1 class="m-0 text-3xl tracking-widest text-primary font-bold">INI LAP</h1>
        <p class="text-secondary-accent text-lg font-medium">Checkout | تأكيد الطلب <i class="fa-solid fa-truck-fast"></i></p>
        <a href="index.html" class="text-secondary-text hover:text-secondary-accent transition duration-300">
            <i class="fa-solid fa-arrow-left"></i> العودة للمتجر
        </a>
    </nav>
    
    <main class="container max-w-7xl mx-auto my-12 px-5 min-h-screen">
        <h2 class="text-center text-3xl text-white mb-8 font-extrabold border-b border-primary/50 pb-4">
            <i class="fa-solid fa-list-check text-secondary-accent"></i> خطوة أخيرة: تفاصيل الطلب والشحن
        </h2>
        
        <div id="checkoutContainer" class="checkout-container flex flex-col lg:flex-row gap-8 mx-auto p-6 bg-light-bg rounded-xl shadow-2xl border border-glass-border">
            
            <div class="checkout-form-area flex-1 p-6 border border-primary/50 rounded-xl bg-dark-bg/50">
                <h3 class="text-2xl font-bold text-primary mb-6 border-b border-glass-border pb-3">1. بيانات الشحن <i class="fa-solid fa-address-card"></i></h3>
                <form id="checkoutForm" class="flex flex-col gap-4">
                    <label for="fullName" class="text-white font-medium">الاسم واللقب:</label>
                    <input type="text" id="fullName" required placeholder="مثال: أحمد محمد" 
                            class="p-3 border border-secondary-accent/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg text-white placeholder-secondary-text transition duration-200">

                    <label for="phone" class="text-white font-medium">رقم الهاتف:</label>
                    <input type="tel" id="phone" required pattern="[0-9]{10,}" placeholder="مثال: 05xx xxx xxx" 
                            class="p-3 border border-secondary-accent/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg text-white placeholder-secondary-text transition duration-200">
                    
                    <label for="wilaya" class="text-white font-medium">الولاية:</label>
                    <input type="text" id="wilaya" required placeholder="مثال: الجزائر العاصمة" 
                            class="p-3 border border-secondary-accent/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-dark-bg text-white placeholder-secondary-text transition duration-200">
                    
                    <p id="checkoutMessage" class="text-price-color font-semibold mt-2"></p>
                    
                    <button type="submit" id="submitCheckoutBtn" class="submit-checkout-btn w-full p-3 bg-success-color text-white rounded-lg font-bold text-lg transition duration-300 hover:bg-green-700 shadow-lg shadow-success-color/30 mt-6">
                        <i class="fa-solid fa-check-circle"></i> تأكيد الطلب الآن
                    </button>
                </form>
            </div>
            
            <div class="order-summary-area flex-1 p-6 border border-secondary-accent/50 rounded-xl bg-dark-bg/70 shadow-inner">
                <h3 class="text-2xl font-bold text-secondary-accent mb-6 border-b border-glass-border pb-3">2. ملخص الطلب <i class="fa-solid fa-bag-shopping"></i></h3>
                <div id="orderSummaryList" class="order-summary-list text-secondary-text space-y-3">
                    <p class="text-center text-secondary-text">جاري تحميل السلة...</p>
                </div>
                <div id="finalTotalDisplay" class="final-total text-right text-xl font-bold pt-4 border-t-2 border-primary mt-4">
                    الإجمالي الكلي: <span class="text-price-color text-3xl font-extrabold">0.00 DZD</span>
                </div>
                
                <p class="mt-4 text-center text-sm text-secondary-text">
                    <i class="fa-solid fa-money-bill-wave text-success-color"></i> الدفع يكون عند الاستلام (Cash on Delivery).
                </p>
            </div>

        </div>
        
        <div id="statusAlert" class="text-center mt-12 p-8 bg-light-bg rounded-xl shadow-2xl"></div>
        
    </main>
    
    <script type="module" src="js/supabase.js"></script> 
    <script type="module" src="js/checkout.js"></script> 
</body>
</html>